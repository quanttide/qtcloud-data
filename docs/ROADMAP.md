# 研发路线图

## 核心逻辑

**根据蓝图生成处理器**

这是整个数据清洗流程的核心环节，其他环节都是围绕它展开的。

## 研发策略

### 理念
- **单元化开发**：每个环节独立可验证
- **人机协作**：AI 生成草稿，人工审核验证
- **最小闭环**：从最小可用流程开始，逐步扩展

### 顾虑
面对琐碎复杂的工程流程，担心系统失效。

**解决方案**：
1. 每个环节独立运行和验证
2. 生成单个环节，可以和人对接
3. 避免全流程自动化的高风险

---

## 最小可用流程

### 阶段 0：基础建设（当前）

**目标**：定义最小可用流程

**任务**：
- [x] 编写 `handbook` - 说明最小可用流程
- [x] 编写 `usercase` - 展示实践用法
- [ ] 明确核心路径和可选路径
- [ ] 确定每个环节的输入输出规范

**交付物**：
- `docs/handbook/` - 工作手册
- `docs/usercase/` - 使用案例
- `docs/spec/` - 工程标准

---

### 阶段 1：核心单元 - 蓝图转处理器

**目标**：实现核心逻辑 - 根据蓝图生成处理器

**任务**：
- [ ] 设计蓝图解析器（读取 MD 表格）
- [ ] 设计处理器代码生成器
- [ ] 定义字段类型映射（str → int，dept → enum）
- [ ] 设计缺失值处理策略生成
- [ ] 单元测试：简单蓝图 → 可运行处理器

**验证标准**：
- AI 生成的处理器代码可以运行
- 处理器符合蓝图定义的规则
- 处理边界情况（空值、极端值）

**交付物**：
- `src/python_sdk/blueprint_parser.py` - 蓝图解析
- `src/python_sdk/processor_generator.py` - 代码生成
- 测试用例覆盖核心场景

---

### 阶段 2：单元化 - 原始数据清洗

**目标**：原始数据 → 清洗后数据的独立单元

**任务**：
- [ ] 设计数据加载器（支持 CSV、Excel）
- [ ] 设计验证器（检查必需列、数据类型）
- [ ] 设计清洗执行器（调用处理器）
- [ ] 设计输出器（保存清洗后数据）
- [ ] 单元测试：端到端清洗流程

**验证标准**：
- 可以加载原始数据
- 可以执行清洗
- 可以输出清洗后数据
- 清洗结果符合预期

**交付物**：
- `src/python_sdk/data_loader.py` - 数据加载
- `src/python_sdk/data_validator.py` - 数据验证
- `src/python_sdk/cleaner_executor.py` - 清洗执行
- 测试用例覆盖完整流程

---

### 阶段 3：验证单元 - 质量检查

**目标**：清洗后数据的质量验证

**任务**：
- [ ] 设计数据质量指标（缺失率、唯一值、分布）
- [ ] 设计断言生成器（根据 blueprint 自动生成）
- [ ] 设计异常检测（超出范围、编码错误）
- [ ] 设计质量报告生成
- [ ] 单元测试：质量检查规则

**验证标准**：
- 可以计算数据质量指标
- 可以生成断言代码
- 可以检测异常数据
- 质量报告清晰可读

**交付物**：
- `src/python_sdk/quality_checker.py` - 质量检查
- `src/python_sdk/quality_reporter.py` - 质量报告
- 测试用例覆盖质量规则

---

### 阶段 4：交付单元 - 清单生成

**目标**：自动生成交付清单

**任务**：
- [ ] 设计清单模板（📦 交付物、🔄 流转路径、✅ 质量验证）
- [ ] 设计自动汇总器（输入、规则、产出物）
- [ ] 设计质量指标计算
- [ ] 设计清单渲染器（Markdown 输出）
- [ ] 单元测试：清单生成正确性

**验证标准**：
- 清单包含所有必需章节
- 清单记录所有输入输出
- 清单包含质量指标
- 清单格式正确

**交付物**：
- `src/python_sdk/manifest_generator.py` - 清单生成
- 测试用例覆盖清单场景

---

### 阶段 5：打包单元 - 交付包生成

**目标**：自动生成 ZIP 交付包

**任务**：
- [ ] 设计打包器（包含所有必要文件）
- [ ] 设计校验和计算（SHA256）
- [ ] 设计 README 生成（版本、时间、负责人）
- [ ] 单元测试：打包完整性

**验证标准**：
- ZIP 包包含所有必要文件
- 校验和正确计算
- README 信息完整
- 可以解压和使用

**交付物**：
- `src/python_sdk/package_builder.py` - 打包构建
- 测试用例覆盖打包场景

---

## 长期规划

### 优化方向
- [ ] AI 生成质量提升（积累常见问题 → spec 写法知识库）
- [ ] 支持更多数据源（数据库、API）
- [ ] 支持更多输出格式（Parquet、JSON）
- [ ] 支持分布式清洗（大数据场景）

### 扩展方向
- [ ] Web 界面（可视化流程）
- [ ] 调度系统（定时清洗任务）
- [ ] 版本管理（数据清洗历史）
- [ ] 审计日志（操作可追溯）

---

## 研发节奏

### 当前焦点
阶段 0：定义最小可用流程

### 下一步
阶段 1：核心单元 - 蓝图转处理器

### 迭代周期
每个阶段独立验证，通过后再进入下一阶段。

---

## 相关文档
- `docs/README.md` - 当前进展
- `docs/spec/README.md` - 工程标准
- `docs/usercase/questionnaire_cleaning.md` - 使用案例
