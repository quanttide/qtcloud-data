# 工程标准

## 原则

1. 共识基础（What We Agree On）  —— 我们和团队、客户、行业共同相信什么？

- ✅ “数据必须可被理解”  
  字段没有清晰定义 = 零件没有规格标签 → 不允许入库。
- ✅ “流程必须可被追溯”  
  无法说清数据从哪来、怎么算的 = 生产线失控 → 必须有工艺卡。
- ✅ “质量必须可被拦截”  
  脏数据流到下游 = 废品出厂 → 质检标准前置到 CI。
- ✅ “变更必须可被管理”  
  改逻辑不改文档 = 图纸与实物不符 → 变更以文档为起点。

这些共识，让你无需解释“为什么要做文档”，而是直接问：“工艺卡更新了吗？”

2. 经验图式（How We Think）  —— 我们解构数据工程问题的心智模型是什么？
图式名称   内容   你的应用
正交分解图式   将系统拆解为“能力层”（平台/工具）与“内容层”（模型/逻辑）   文档管内容，平台管执行

活资产图式   知识（如字段定义）必须可被机器消费、测试、集成   枚举值写成代码，CI 自动校验

飞轮构建图式   好的工程实践会自我强化：规范 → 质量 → 效率 → 更愿规范   一次文档化，减少十次救火

渐进抽象图式   先用简单方式跑通（如 Markdown 表格），再逐步自动化（如 Schema as Code）   不追求完美工具，先建立习惯

这些图式，让你在面对混乱时，自动调用已验证的解决路径。

3. 心理假设（What We Deeply Believe）  —— 我们未明说但深信不疑的底层信念是什么？

- 🔒 “系统优于英雄”  
  宁可慢一点，也要让新人能靠文档接手，而不是依赖某个“大神”。
- 🔒 “可运行的规范胜过完美的理论”  
  一个能被 CI 拦截的简单规则，比一百页 PPT 更有价值。
- 🔒 “透明带来信任”  
  把数据怎么来的、怎么算的公开出来，客户反而更敢用。
- 🔒 “克制即战略”  
  拒绝“快速 hack”，因为知道短期省下的时间，会在未来十倍偿还。


## 组件

在制造业（生产主线）上，如果没有工艺卡、没有图纸、没有BOM表，工厂是无法运转的。

为了让你的“用文档管理生命周期”这个初衷落地，我们可以把数据工程文档拆解为工厂里的三大核心生产文档：

🏗️ 1. 设计图纸 (The Blueprint) —— 对应“数据建模”
在造车之前，必须有设计图纸。在数据生产中，这就是数据的Schema和模型设计。

-   文档内容： 字段定义、主外键关系、ER图。
-   生产意义： 告诉“工人”（开发人员）这个数据产品长什么样，接口标准是什么。
-   生命周期管理： 如果图纸变了（需求变更），文档必须第一时间更新，否则生产线（代码）就会产出废品。

⚙️ 2. 工艺卡 (The Process Card) —— 对应“加工逻辑”
这是指导具体怎么造的文档，比如“这个零件需要先淬火，再车削”。

-   文档内容： ETL逻辑、SQL脚本逻辑说明、数据清洗规则。
-   生产意义： 记录“原材料”（源数据）是如何经过一系列工序变成“成品”（目标表）的。
-   本质作用： 当原来的“工人”离职了，新来的工人看这个“工艺卡”就能接手维护，不会导致生产线瘫痪。

🔍 3. 质检标准 (The QC Standard) —— 对应“数据质量”
这是产品出厂前的检验环节。

-   文档内容： 空值率阈值、唯一性约束、波动率告警规则。
-   生产意义： 定义什么样的数据是合格的，什么样的数据是废品（需要返工）。
-   生命周期管理： 如果质检标准变了，文档必须记录变更历史，以便追溯为什么某一天的数据突然“不合格”了。

## 生命周期

结合“生产工艺”视角，数据工程的生命周期其实就是“从图纸设计到产品报废”的全过程管理：

1.  设计阶段（图纸诞生）： 文档记录了最初的需求和设计意图。
2.  试产阶段（代码开发）： 工人根据图纸（文档）搭建生产线（写代码）。
3.  量产阶段（任务调度）： 生产线自动运行，但必须依据工艺卡（文档）进行维护。
4.  质检阶段（数据监控）： 依据质检标准（文档）拦截脏数据。
5.  退市阶段（下线归档）： 当产品（数据表）不再被使用，文档中标记“已废弃”，通知生产线停止运行。

## 最佳实践

既然是“生产主线”，那么你的数据工程文档必须具备“强约束力”，就像工厂的ISO质量体系文件一样：

-   无文档，不上线： 就像没有图纸不能开工一样，没有在文档中心注册的表，不能进入生产环境。
-   变更必留痕： 就像修改图纸必须走变更流程一样，数据逻辑变了，必须先改文档，再改代码。
-   文档即代码： 最好的状态是，文档中的“工艺卡”（逻辑定义）能直接生成部分代码，或者代码的注释能自动生成文档，实现“图物相符”。

